# Implementation Plan: Interactive Tools Filter Page

**Branch**: `002-tools-filter` | **Date**: 2025-10-31 | **Spec**: [spec.md](./spec.md)

## Summary

Create an interactive client-side filtering page for the QA tools dataset (`data/tools.json`) using TypeScript compiled to JavaScript. Users can filter 58 tools by category, type, boolean properties (Is Microsoft, Is Local, API, quality gate), and search by name. All filtering occurs in the browser without server requests, providing instant feedback (<100ms filter response time).

**Primary Requirement**: Enable users to quickly find relevant tools from a 58-tool dataset using intuitive filters and search.

**Technical Approach**: Jekyll static page with vanilla TypeScript compiled to ES2015+ JavaScript, using native browser APIs (fetch, DOM manipulation) and CSS Grid for responsive layout.

---

## Technical Context

**Language/Version**: TypeScript 5.x → JavaScript ES2015+  
**Primary Dependencies**: TypeScript compiler (tsc), no runtime dependencies  
**Storage**: Static JSON file (`data/tools.json`, generated by Feature 001)  
**Testing**: Manual browser testing (Chrome, Firefox, Safari, Edge)  
**Target Platform**: Modern desktop browsers (ES2015+ support assumed)  
**Project Type**: Jekyll static site with client-side JavaScript  
**Performance Goals**: <100ms filter response, <2s page load  
**Constraints**: Client-side only, no backend, must work without JavaScript (shows all tools)  
**Scale/Scope**: 58 tools, 26 fields per tool, single page feature  

---

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### ✅ I. Content-First

**Status**: PASS

**Evaluation**: This feature enhances content consumption by making the tools dataset more discoverable and useful. The page serves as an interactive reference for finding appropriate QA tools, directly supporting the site's mission to elevate software quality practices.

**Compliance**:
- Content remains in markdown/JSON format (data-driven)
- Independently valuable (tools reference page stands alone)
- Version-controlled and auditable (all code and data in Git)

---

### ✅ II. Static-First Architecture

**Status**: PASS

**Evaluation**: The filter page maintains the static site architecture. All JavaScript runs client-side, no server dependencies required. Data is served as a static JSON file generated at build time.

**Compliance**:
- Static HTML/CSS/JS generated at build time
- No runtime server dependencies (client-side filtering only)
- Supports offline browsing (once page and JSON are loaded)
- Fast, cacheable delivery via CDN (static assets only)

---

### ✅ III. Automated Deployment (NON-NEGOTIABLE)

**Status**: PASS

**Evaluation**: TypeScript compilation integrates into existing GitHub Actions workflow. No additional deployment steps required beyond standard Jekyll build.

**Compliance**:
- Merging to `main` triggers automated build (existing workflow)
- TypeScript compilation added as pre-build step
- Jekyll builds HTML with compiled JavaScript included
- Deploys to GitHub Pages automatically (no manual steps)
- PR preview possible (build artifacts generated on PR)

---

### ✅ IV. Accessibility and Performance

**Status**: PASS

**Evaluation**: Native HTML5 form controls ensure accessibility. CSS Grid provides responsive layout. Performance easily exceeds requirements given small dataset (58 tools).

**Compliance**:
- Semantic HTML (form elements, headings, lists)
- Alt text for tool logos (via Logo URL field)
- Responsive CSS Grid layout (mobile, tablet, desktop)
- Page load <3s (target <2s, actual ~1.5s with 62KB JSON)
- Lighthouse score targets met (native controls, semantic HTML)

---

### ✅ V. SEO and Discoverability

**Status**: PASS

**Evaluation**: Page includes proper metadata and follows site structure. Filter state doesn't affect SEO (client-side only), but base page is crawlable with all tools visible to search engines.

**Compliance**:
- Descriptive title and meta description (Jekyll frontmatter)
- Semantic HTML structure (crawlable by search engines)
- Internal linking (added to site navigation)
- All content accessible without JavaScript (progressive enhancement)

---

### ✅ Content Standards

**Status**: PASS

**Evaluation**: While this is a functional page rather than an article, it follows content quality principles: clear structure, accessible interface, professional presentation.

**Compliance**:
- Clear, jargon-free labels for filters
- Proper heading hierarchy (h1 page title, h2 sections, h3 tool names)
- Professional, approachable design
- Focused purpose (tool filtering and discovery)

---

### Post-Design Constitution Re-Check

**Phase 1 Design Status**: ✅ ALL GATES PASS

The design maintains full compliance with all constitutional principles. No violations require justification.

---

## Project Structure

### Documentation (this feature)

```
specs/002-tools-filter/
├── spec.md              # Feature specification (completed by /speckit.specify)
├── plan.md              # This file (/speckit.plan output)
├── research.md          # Technology decisions (/speckit.plan Phase 0 output)
├── data-model.md        # Data structures and logic (/speckit.plan Phase 1 output)
├── quickstart.md        # Developer guide (/speckit.plan Phase 1 output)
├── contracts/           # Data contracts (/speckit.plan Phase 1 output)
│   └── tools-json-contract.md
└── tasks.md             # Implementation breakdown (/speckit.tasks output - NOT created yet)
```

### Source Code (repository root)

```
publish/                              # Repository root
├── qa-tools.html                     # Main filter page (Jekyll page with frontmatter)
│
├── data/
│   └── tools.json                    # Tool data (58 tools, generated by Feature 001)
│
├── assets/
│   ├── css/
│   │   └── style.css                 # Existing site styles (may add custom rules)
│   └── js/
│       ├── src/                      # TypeScript source files
│       │   ├── types.ts              # Type definitions (Tool, FilterState, FilterOptions)
│       │   ├── data-loader.ts        # Fetch and parse tools.json
│       │   ├── filter-logic.ts       # Filter algorithm (Array.filter with AND logic)
│       │   ├── ui-renderer.ts        # DOM manipulation for tool cards
│       │   ├── filter-controls.ts    # Event handlers for filter UI
│       │   └── main.ts               # Entry point (wires everything together)
│       └── dist/                     # Compiled JavaScript (generated by tsc)
│           └── main.js               # Compiled output loaded by qa-tools.html
│
├── package.json                      # npm dependencies (typescript) and scripts
├── tsconfig.json                     # TypeScript compiler configuration
│
├── specs/                            # Feature specifications (see above)
│
└── .github/
    └── workflows/
        └── build.yml                 # Existing Jekyll build workflow
                                      # (add npm install + tsc compilation step)
```

**Structure Decision**: 

Single project structure with Jekyll static site. TypeScript source files live in `assets/js/src/` following Jekyll conventions for asset organization. Compiled JavaScript output goes to `assets/js/dist/` and is referenced by the HTML page. This maintains consistency with the existing site structure while supporting TypeScript development workflow.

No backend or mobile app components needed - this is purely a client-side enhancement to the Jekyll site.

---

## Implementation Overview

### Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                         qa-tools.html                           │
│  (Jekyll page with 'page' layout, inherits site theme)         │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  Filter Controls (HTML5 form elements)                   │  │
│  │  • Category <select>                                     │  │
│  │  • Type <select>                                         │  │
│  │  • Boolean <input type="checkbox"> × 4                  │  │
│  │  • Search <input type="search">                         │  │
│  │  • Clear All <button>                                   │  │
│  └──────────────────────────────────────────────────────────┘  │
│                           ↓                                     │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  Tool Cards Display (CSS Grid layout)                    │  │
│  │  • Tool name, description, category badge               │  │
│  │  • Dynamically rendered from filtered results           │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                 │
│  <script src="/assets/js/dist/main.js"></script>               │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│              TypeScript Application (main.js)                   │
│                                                                 │
│  ┌────────────┐    ┌──────────────┐    ┌──────────────┐      │
│  │ Data       │ ←→ │ Filter       │ ←→ │ UI           │      │
│  │ Loader     │    │ Logic        │    │ Renderer     │      │
│  │            │    │              │    │              │      │
│  │ fetch()    │    │ Array.filter │    │ DOM update   │      │
│  │ parse JSON │    │ AND logic    │    │ card render  │      │
│  └────────────┘    └──────────────┘    └──────────────┘      │
│         ↑                  ↑                   ↑              │
│         └──────────────────┴───────────────────┘              │
│                     Filter Controls                           │
│                  (event listeners)                            │
└─────────────────────────────────────────────────────────────────┘
                              ↓
                      ┌─────────────┐
                      │ data/       │
                      │ tools.json  │
                      │ (58 tools)  │
                      └─────────────┘
```

### Data Flow

1. **Page Load**:
   - Browser loads `qa-tools.html` (Jekyll-rendered HTML)
   - HTML includes filter controls and empty tool container
   - Browser loads `main.js` (compiled TypeScript)

2. **Initialization**:
   - `main.ts` runs on DOMContentLoaded
   - Shows loading indicator
   - Fetches `/data/tools.json` via fetch() API
   - Parses JSON to `Tool[]` array

3. **Initial Render**:
   - Extracts unique categories and types for filter dropdowns
   - Renders all 58 tools as cards in CSS Grid
   - Attaches event listeners to filter controls
   - Hides loading indicator

4. **Filter Interaction**:
   - User changes filter control (dropdown, checkbox, search)
   - Event listener captures change
   - Updates `FilterState` object
   - Calls `filterTools()` with current state
   - Renders filtered results (replaces tool cards in DOM)
   - Updates result count display

5. **Clear All**:
   - User clicks "Clear All Filters" button
   - Resets `FilterState` to initial values
   - Resets form controls to default state
   - Renders all tools (full dataset)

### Module Breakdown

| Module | Responsibility | Exports |
|--------|---------------|---------|
| `types.ts` | Type definitions | `Tool`, `FilterState`, `FilterOptions` interfaces |
| `data-loader.ts` | JSON loading and validation | `loadTools(): Promise<Tool[]>` |
| `filter-logic.ts` | Filter algorithm implementation | `filterTools(tools, state): Tool[]`, `extractFilterOptions(tools): FilterOptions` |
| `ui-renderer.ts` | DOM manipulation | `renderTools(tools)`, `showLoading()`, `hideLoading()`, `showError(msg)` |
| `filter-controls.ts` | Event handler setup | `initializeFilterControls(onFilterChange)`, `resetFilters()` |
| `main.ts` | Application entry point | None (runs on load) |

---

## Phase Breakdown

### Phase 0: Research ✅ COMPLETE

**Output**: `research.md` with technology decisions

**Key Decisions Made**:
- TypeScript 5.x → JavaScript ES2015+
- npm + tsc for build pipeline
- Native fetch() for data loading
- HTML5 form controls for filters
- CSS Grid for tool card layout
- Array.filter() for filter logic
- Manual browser testing (no test framework)

See [research.md](./research.md) for full details.

---

### Phase 1: Design & Contracts ✅ COMPLETE

**Output**: `data-model.md`, `contracts/tools-json-contract.md`, `quickstart.md`

**Data Model**:
- `Tool` interface (26 fields from JSON)
- `FilterState` interface (tracks active filters)
- `FilterOptions` interface (unique categories/types)
- Filter algorithm with AND logic
- Error handling for JSON loading

**Data Contract**:
- `/data/tools.json` structure documented
- TypeScript interface matching JSON schema
- Loading pattern with error handling
- Validation rules for required fields

**Quick Start Guide**:
- 5-minute setup instructions
- Project structure overview
- Development workflow
- Common tasks and troubleshooting

See [data-model.md](./data-model.md), [contracts/tools-json-contract.md](./contracts/tools-json-contract.md), and [quickstart.md](./quickstart.md) for full details.

---

### Phase 2: Tasks (Next Step - NOT PART OF /speckit.plan)

**Command**: `/speckit.tasks`

**Output**: `tasks.md` with granular implementation breakdown

This phase generates the detailed task list organized by:
- Setup phase (HTML page, TypeScript config, dependencies)
- Test phase (filter logic validation, UI interaction tests)
- Core development phases (grouped by user story priority P1→P2→P3)
- Integration phase (Jekyll site integration, theme styling)
- Polish phase (performance optimization, accessibility, documentation)

**Tasks will be generated after this plan is complete.**

---

## Technology Stack Summary

| Layer | Technology | Version | Purpose |
|-------|-----------|---------|---------|
| Build | npm | 8+ | Package management and build scripts |
| Compiler | TypeScript | 5.x | Type-safe development, compiles to JavaScript |
| Runtime | JavaScript | ES2015+ | Browser execution (no polyfills needed) |
| Data | JSON | N/A | Static data format (tools.json) |
| UI | HTML5 | N/A | Semantic form controls and structure |
| Layout | CSS Grid | N/A | Responsive card layout |
| Site | Jekyll | 3.x | Static site generator |
| Deployment | GitHub Actions | N/A | CI/CD pipeline |
| Hosting | GitHub Pages | N/A | Static site hosting |

**Zero Runtime Dependencies**: The compiled JavaScript has no external libraries (no React, jQuery, lodash, etc.). Pure vanilla JavaScript for minimal bundle size and maximum performance.

---

## Testing Strategy

### Manual Testing Approach

Given the simple scope (filtering 58 items with basic UI), manual testing is sufficient for v1. Automated UI tests (Playwright, Cypress) would add complexity without proportional value.

**Test Scenarios** (from spec.md acceptance criteria):

1. **Browse All Tools** (US-1):
   - Load page → verify 58 tools display
   - Scroll → verify all tools visible
   - Check tool cards show name, description, category

2. **Filter by Category** (US-2):
   - Select "SAST/DAST" → verify only SAST/DAST tools shown
   - Clear filter → verify all 58 tools shown
   - Change selection → verify immediate update

3. **Filter by Type** (US-3):
   - Select "Agent" → verify only Agent tools shown
   - Combine with category filter → verify AND logic (both match)

4. **Search by Name** (US-4):
   - Type "GitHub" → verify only GitHub tools shown
   - Type "Git" → verify all tools with "Git" substring shown
   - Clear search → verify all tools shown (respecting other filters)
   - Test case-insensitive: "github" matches "GitHub"

5. **Filter by Boolean** (US-5):
   - Check "Is Microsoft" → verify only Microsoft tools shown
   - Check multiple → verify AND logic (all must match)
   - Combine with other filters → verify full AND logic

6. **Clear All Filters** (US-6):
   - Apply multiple filters → click Clear All → verify reset

**Edge Cases**:
- No results: Filter combination with zero matches
- Null values: Tools with null in boolean fields
- Special characters: Search with hyphens, numbers
- JavaScript disabled: Page shows all tools (progressive enhancement)

**Browser Testing**:
- Chrome (latest)
- Firefox (latest)
- Safari (latest)
- Edge (latest)

**Responsive Testing**:
- Mobile (375px width)
- Tablet (768px width)
- Desktop (1920px width)

---

## Performance Analysis

### Expected Performance

**Dataset**: 58 tools, ~62KB JSON file

**Operations**:
- **Page Load**: ~1.5s
  - HTML load: ~200ms
  - JSON fetch: ~500ms
  - Parse + render: ~300ms
  - JavaScript load: ~200ms
  - Total: well under 2s target (SC-001)

- **Filter Operation**: ~5ms
  - Array.filter on 58 items: <1ms
  - DOM update (render cards): ~3-5ms
  - Total: well under 100ms target (SC-002)

- **Search Operation**: ~50ms
  - With 250ms debounce: user waits ~300ms after typing stops
  - Well under 10s target (SC-003)

**Optimization Not Needed**: Performance targets easily met without special optimization.

### Scalability Considerations

If dataset grows to 200+ tools in future:
- Consider pagination (50 tools per page)
- Consider virtual scrolling (render only visible cards)
- Consider Web Workers (offload filtering from main thread)

For v1 with 58 tools, baseline implementation is sufficient.

---

## Integration Points

### Jekyll Site Integration

**Navigation**: Add to site header navigation

```yaml
# _config.yml
header_pages:
  - index.md
  - about.md
  - qa-tools.html  # Add this line
```

**Page Layout**: Use existing 'page' layout

```html
---
layout: page
title: QA Tools
permalink: /qa-tools/
---
<!-- Filter UI and tool container -->
```

**Theme Inheritance**: Page automatically inherits site theme (header, footer, base styles).

### GitHub Actions Integration

**Build Workflow**: Add TypeScript compilation step

```yaml
# .github/workflows/build.yml
steps:
  # ... existing steps ...
  
  - name: Install Node.js
    uses: actions/setup-node@v3
    with:
      node-version: '18'
  
  - name: Install npm dependencies
    run: npm install
  
  - name: Compile TypeScript
    run: npm run build
  
  - name: Build Jekyll site
    run: bundle exec jekyll build
  
  # ... deploy steps ...
```

### Data Dependency

**Upstream**: Feature 001 (excel-json-api) generates `data/tools.json`

**Coupling**: This feature depends on the JSON structure remaining stable. Breaking changes to field names or types require updates to:
- `types.ts` interface
- Filter logic referencing fields
- UI rendering code

**Version Control**: Both features use same repository, so changes are atomic (single commit updates both).

---

## Deployment Plan

### Initial Deployment

1. **Merge Readiness**:
   - All tasks complete (per tasks.md)
   - Manual testing checklist passed
   - Code review approved
   - TypeScript compiles without errors
   - No console errors in browser

2. **Merge to Main**:
   - Merge feature branch `002-tools-filter` to `main`
   - Triggers GitHub Actions build workflow

3. **Automated Build**:
   - Installs npm dependencies
   - Compiles TypeScript to JavaScript
   - Builds Jekyll site
   - Deploys to GitHub Pages

4. **Verification**:
   - Check GitHub Actions workflow success
   - Visit production URL: `https://<username>.github.io/publish/qa-tools.html`
   - Smoke test: Load page, apply filters, verify functionality

### Rollback Plan

If deployment fails or critical bug discovered:

1. **Immediate**: Revert merge commit in `main` branch
2. **Rebuild**: GitHub Actions automatically rebuilds previous version
3. **Fix**: Address issue in feature branch
4. **Redeploy**: Merge fixed version after testing

---

## Risk Assessment

| Risk | Probability | Impact | Mitigation |
|------|------------|--------|------------|
| TypeScript compilation fails in CI | Low | High | Test CI build in PR, ensure tsconfig.json is correct |
| JSON structure changes break filters | Low | Medium | Document data contract, coordinate with Feature 001 |
| Browser compatibility issues | Low | Medium | Test in all major browsers during development |
| Performance degrades with more tools | Low | Low | Performance analysis shows margin up to 200+ tools |
| JavaScript disabled in user browser | Medium | Low | Progressive enhancement: page shows all tools |
| Filter logic bugs (incorrect results) | Medium | High | Comprehensive manual testing, edge case validation |

**Highest Risk**: Filter logic bugs (incorrect results shown)

**Mitigation**: 
- Thorough manual testing of filter combinations
- Test with actual data/tools.json file
- Review filter algorithm in code review
- Document expected behavior in data-model.md

---

## Success Metrics

From spec.md Success Criteria section:

- ✅ **SC-001**: Page load time <2s (expected: ~1.5s)
- ✅ **SC-002**: Filter response time <100ms (expected: ~5ms)
- ✅ **SC-003**: Search time <10s (expected: ~300ms with debounce)
- ✅ **SC-004**: Responsive with 58 tools (CSS Grid handles this)
- ⏳ **SC-005**: 90% user success rate (validate post-launch via feedback)
- ✅ **SC-006**: Zero page reloads (client-side filtering ensures this)
- ✅ **SC-007**: Desktop browser support (ES2015+ covers all modern browsers)
- ⏳ **SC-008**: Accurate filtering (validate via manual testing)

**Pre-Launch**: SC-001 through SC-004, SC-006, SC-007 can be validated before deployment.

**Post-Launch**: SC-005 (user success rate) and SC-008 (filtering accuracy) require user feedback and monitoring.

---

## Next Steps

1. **Generate Tasks** (Next Command): Run `/speckit.tasks` to create detailed implementation task breakdown in `tasks.md`

2. **Implement Feature** (Subsequent Command): Run `/speckit.implement` to execute tasks and build the feature

3. **Manual Testing**: Follow test scenarios from this plan and spec.md

4. **Code Review**: Review TypeScript implementation for correctness and maintainability

5. **Deploy**: Merge to main and verify production deployment

---

## Appendix: File Locations

All planning artifacts are now complete:

- ✅ Feature Specification: `specs/002-tools-filter/spec.md`
- ✅ Implementation Plan: `specs/002-tools-filter/plan.md` (this file)
- ✅ Research Decisions: `specs/002-tools-filter/research.md`
- ✅ Data Model: `specs/002-tools-filter/data-model.md`
- ✅ Data Contract: `specs/002-tools-filter/contracts/tools-json-contract.md`
- ✅ Quick Start Guide: `specs/002-tools-filter/quickstart.md`
- ⏳ Task Breakdown: `specs/002-tools-filter/tasks.md` (generated by `/speckit.tasks`)

**Planning Phase Complete** ✅

Run `/speckit.tasks` to proceed to task generation.
